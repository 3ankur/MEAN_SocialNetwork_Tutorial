!function(){angular.module("TimeWaste").controller("MainController",["$scope","$http","$interval",function(e,t,r){function o(r){t.get("api/waste/get").success(function(t){r?e.wastes=t:t.length>e.wastes.length&&(e.incomingWastes=t)})}void 0!==localStorage["User-Data"]&&(e.user=JSON.parse(localStorage["User-Data"]),console.log(e.user)),e.sendWaste=function(r){if(13===r.which){var o={user:e.user.username||e.user.email,userId:e.user._id,userImage:e.user.image,content:e.newWaste};t.post("api/waste/post",o).success(function(t){console.log(t),e.wastes=t}).error(function(e){console.error(e)})}},r(function(){o(!1),e.incomingWastes&&(e.difference=e.incomingWastes.length-e.wastes.length),console.log("this is working")},5e3),e.setNewWastes=function(){e.wastes=angular.copy(e.incomingWastes),e.incomingWastes=void 0},o(!0)}])}();